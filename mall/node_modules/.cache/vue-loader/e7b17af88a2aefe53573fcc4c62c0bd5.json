{"remainingRequest":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\src\\views\\product.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\src\\views\\product.vue","mtime":1581592543551},{"path":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\樊敏.LAPTOP-247FKDAH\\Desktop\\作品\\Vueyardmall\\mall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3Byb2R1Y3R7CiAgICAuc3dpcGVJbWd7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICB9CiAgICAuaW5mb3sKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOwogICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICBjb2xvcjogIzk5OTsKICAgICAgICBoZWlnaHQ6IDI0cHg7CiAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7CiAgICAgICAgYmFja2dyb3VuZDogI2VmZWZlZjsKICAgICAgICBzcGFuewogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgfQogICAgICAgIHNwYW46OmJlZm9yZXsKICAgICAgICAgICAgY29udGVudDoiIjsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgbGVmdDogLTEwcHg7CiAgICAgICAgICAgIHRvcDogOHB4OwogICAgICAgICAgICB3aWR0aDogNHB4OwogICAgICAgICAgICBoZWlnaHQ6IDRweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7CgogICAgICAgIH0KICAgIH0KICAgIC5wcm9JbmZvewogICAgICAgIC50aXRsZXsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgICAgICAgcGFkZGluZzoxMHB4IDAgNXB4OwogICAgICAgIH0KICAgICAgICAuYnJpZWZ7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgY29sb3I6ICM5OTk7CiAgICAgICAgICAgIHBhZGRpbmc6IDNweDsKICAgICAgICB9CiAgICAgICAgLnByaWNlewogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgIGNvbG9yOiByZWQ7CiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsKICAgICAgICB9CiAgICB9CiAgICAudmFuLWNlbGxfX3RpdGxlewogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICB9CiAgICAucHJvUGFyYW1zewogICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4OwogICAgICAgIGgzewogICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDA7CiAgICAgICAgfQogICAgICAgIC5wcm9JdGVtewogICAgICAgICAgICB3aWR0aDogOTAlOwogICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBoZWlnaHQ6IDI0cHg7CiAgICAgICAgICAgIGNvbG9yOiAjOTk5OwogICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlZmVmZWY7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgICBzcGFuLnRpdGxlewogICAgICAgICAgICAgICAgd2lkdGg6NDVweDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDsKICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNjY2M7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3Bhbi52YWx1ZXsKICAgICAgICAgICAgICAgIHdpZHRoOiAyNjBweDsKICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgCiAgICB9CiAgICAucHJvRGV0YWlsewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGltZ3sKICAgICAgICAgICAgd2lkdGg6IDEwMCUKICAgICAgICB9CiAgICAgICAgcHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIH0KICAgIH0KICAgIAp9CgoK"},{"version":3,"sources":["product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"product.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div id=\"product\">\r\n        <van-nav-bar\r\n            title=\"商品\"\r\n            left-text=\"返回\"\r\n            left-arrow\r\n            @click-left=\"onClickLeft\"\r\n            />\r\n\r\n        <van-swipe :autoplay=\"3000\">\r\n            <van-swipe-item v-for=\"(image, index) in images\" :key=\"index\">\r\n                <img class=\"swipeImg\" v-lazy=\"image.img_url\" />\r\n            </van-swipe-item>\r\n        </van-swipe>\r\n\r\n        <div class='info'>\r\n            <span>30天无忧退货</span>\r\n            <span>48小时快速退款</span>\r\n            <span>满88元免邮费</span>\r\n        </div>\r\n\r\n\r\n        <div class=\"proInfo\">\r\n            <h3 class=\"title\">{{info.name}}</h3>\r\n            <p class=\"brief\">{{info.goods_brief}}</p>\r\n            <p class=\"price\">￥{{info.retail_price}}</p>\r\n        </div>\r\n        <van-cell title=\"请选择规格数量\" is-link />\r\n\r\n        <!-- 商品参数 -->\r\n        <div class=\"proParams\">\r\n            <h3>商品参数</h3>\r\n            <div class=\"proItem\" v-for=\"(item1,index1) in attribute\" :key=\"index1\">\r\n                <span class=\"title\">{{item1.name}}</span>\r\n                <span class=\"value\">{{item1.value}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 商品详情 -->\r\n        <div class=\"proDetail\" v-html=\"info.goods_desc\">\r\n\r\n        </div>\r\n\r\n\r\n        <van-goods-action>\r\n            <van-goods-action-icon to=\"/buycart\" :info=\"$store.state.cartTotal.goodsCount==0?'':$store.state.cartTotal.goodsCount\" icon=\"cart-o\" text=\"购物车\" />\r\n            <van-goods-action-icon icon=\"star-o\" text=\"已收藏\"  />\r\n            <van-goods-action-button @click=\"chooseSku\" type=\"warning\" text=\"加入购物车\" />\r\n            <van-goods-action-button type=\"danger\" text=\"立即购买\" />\r\n        </van-goods-action>\r\n\r\n        <!-- 选择商品规格 -->\r\n        <van-sku\r\n            v-model=\"showSku\"\r\n            :sku=\"sku\"\r\n            :goods=\"goods\"\r\n            \r\n            @buy-clicked=\"onBuyClicked\"\r\n            @add-cart=\"onAddCartClicked\"\r\n            />\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nlet sku = {\r\n  // 所有sku规格类目与其值的从属关系，比如商品有颜色和尺码两大类规格，颜色下面又有红色和蓝色两个规格值。\r\n  // 可以理解为一个商品可以有多个规格类目，一个规格类目下可以有多个规格值。\r\n  tree: [\r\n    {\r\n      k: '颜色', // skuKeyName：规格类目名称\r\n      v: [\r\n        {\r\n          id: '30349', // skuValueId：规格值 id\r\n          name: '红色', // skuValueName：规格值名称\r\n          \r\n        },\r\n        {\r\n          id: '1215',\r\n          name: '蓝色',\r\n          \r\n        }\r\n      ],\r\n      k_s: 's1' // skuKeyStr：sku 组合列表（下方 list）中当前类目对应的 key 值，value 值会是从属于当前类目的一个规格值 id\r\n    }\r\n  ],\r\n  // 所有 sku 的组合列表，比如红色、M 码为一个 sku 组合，红色、S 码为另一个组合\r\n  list: [\r\n    {\r\n      id: 2259, // skuId，下单时后端需要\r\n      price: 100, // 价格（单位分）\r\n      's-1': '2', // 规格类目 k_s 为 s1 的对应规格值 id\r\n      's-2': '3', // 规格类目 k_s 为 s2 的对应规格值 id\r\n      stock_num: 110 // 当前 sku 组合对应的库存\r\n    },\r\n    {\r\n      id: 2259, // skuId，下单时后端需要\r\n      price: 100, // 价格（单位分）\r\n      's-1': '1', // 规格类目 k_s 为 s1 的对应规格值 id\r\n      's-2': '4', // 规格类目 k_s 为 s2 的对应规格值 id\r\n      stock_num: 130 // 当前 sku 组合对应的库存\r\n    }\r\n  ],\r\n  price: '1.00', // 默认价格（单位元）\r\n  stock_num: 227, // 商品总库存\r\n  \r\n  \r\n}\r\nexport default {\r\n    props:['id'],\r\n    data(){\r\n        return {\r\n            data:{},\r\n            info:{},\r\n            attribute:[],\r\n            showSku:false,\r\n            sku:sku,\r\n            goods: {\r\n                // 商品标题\r\n                title: '测试商品',\r\n                // 默认商品 sku 缩略图\r\n                picture: 'https://img.yzcdn.cn/1.jpg'\r\n            }\r\n            \r\n        }\r\n    },\r\n    methods:{\r\n        onClickLeft:function(){\r\n            this.$router.go(-1);\r\n        },\r\n        onBuyClicked:function(){\r\n            // 将当前的内容提交到订单页\r\n        },\r\n        async onAddCartClicked(skuData){\r\n            //console.log(123)\r\n            //获取选中的商品，并且提交到后端的购车API里\r\n            //选择商品规格，并提交到购物车\r\n            this.showSku = false;\r\n            console.log(skuData)\r\n            let chooseContent = skuData.selectedSkuComb['s-1']+'_'+skuData.selectedSkuComb['s-2']\r\n            //console.log(chooseContent)\r\n            let resultPro = this.data.productList.filter((item,index)=>{\r\n\r\n                if(item.goods_specification_ids==chooseContent){\r\n                    return true\r\n                }else{\r\n                    return false\r\n                }\r\n            })\r\n            console.log(resultPro)\r\n\r\n            let cartRes = await axios.post(this.$root.api.CartAdd,{ goodsId:resultPro[0].goods_id , number: skuData.selectedNum, productId: resultPro[0].id })\r\n            let data = cartRes.data.data\r\n            console.log(cartRes.data)\r\n\r\n            this.$store.commit('setCarList',data.cartList),\r\n            this.$store.commit('setCartTotal',data.cartTotal)\r\n        },\r\n        chooseSku(){\r\n            this.showSku = true;\r\n        }\r\n\r\n    },\r\n    computed:{\r\n        images:function(){\r\n            if(this.data.gallery==undefined){\r\n                return []\r\n            }else{\r\n                return this.data.gallery;\r\n            }\r\n        }\r\n    },\r\n    async created(){\r\n        this.$store.dispatch('AjaxCart');\r\n       let res = await axios.get(this.$root.api.GoodsDetail,{params:{id:this.id}})\r\n       console.log(res.data)\r\n       this.data = res.data.data;\r\n       this.info = this.data.info;\r\n       this.attribute = this.data.attribute;\r\n       this.goods.picture = this.info.primary_pic_url;\r\n       this.goods.title = this.info.name;\r\n       this.sku.price = this.info.retail_price;\r\n       this.sku.stock_num = this.info.goods_number;\r\n       let tree = []\r\n       this.data.specificationList.forEach((item,index)=>{\r\n           let arr = []\r\n           item.valueList.forEach((product,i)=>{\r\n               arr.push({\r\n                    id: product.id, // skuValueId：规格值 id\r\n                    name: product.value, // skuValueName：规格值名称\r\n                })\r\n           })\r\n           tree.push({\r\n                k: item.name, // skuKeyName：规格类目名称\r\n                v: arr,\r\n                k_s: \"s-\"+item.specification_id // skuKeyStr：sku 组合列表（下方 list）中当前类目对应的 key 值，value 值会是从属于当前类目的一个规格值 id\r\n            })\r\n       })\r\n       this.sku.tree = tree;\r\n       \r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    #product{\r\n        .swipeImg{\r\n            width: 100%;\r\n        }\r\n        .info{\r\n            display: flex;\r\n            justify-content: space-around;\r\n            font-size: 12px;\r\n            color: #999;\r\n            height: 24px;\r\n            line-height: 24px;\r\n            background: #efefef;\r\n            span{\r\n                position: relative;\r\n            }\r\n            span::before{\r\n                content:\"\";\r\n                display: block;\r\n                position: absolute;\r\n                left: -10px;\r\n                top: 8px;\r\n                width: 4px;\r\n                height: 4px;\r\n                border-radius: 2px;\r\n                border: 1px solid red;\r\n\r\n            }\r\n        }\r\n        .proInfo{\r\n            .title{\r\n                font-weight: 500;\r\n                padding:10px 0 5px;\r\n            }\r\n            .brief{\r\n                font-size: 12px;\r\n                color: #999;\r\n                padding: 3px;\r\n            }\r\n            .price{\r\n                font-size: 16px;\r\n                color: red;\r\n                padding: 5px;\r\n            }\r\n        }\r\n        .van-cell__title{\r\n            text-align: left;\r\n        }\r\n        .proParams{\r\n            padding-bottom: 20px;\r\n            h3{\r\n                padding: 10px 0;\r\n            }\r\n            .proItem{\r\n                width: 90%;\r\n                margin: 0 auto;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                height: 24px;\r\n                color: #999;\r\n                font-size: 12px;\r\n                background: #efefef;\r\n                line-height: 24px;\r\n                text-align: left;\r\n                span.title{\r\n                    width:45px;\r\n                    padding: 0 10px;\r\n                    border-right: 1px solid #ccc;\r\n                }\r\n                span.value{\r\n                    width: 260px;\r\n                    overflow: hidden;\r\n                    text-overflow: ellipsis;\r\n                    white-space: nowrap;\r\n                }\r\n            }\r\n            \r\n            \r\n        }\r\n        .proDetail{\r\n            width: 100%;\r\n            img{\r\n                width: 100%\r\n            }\r\n            p{\r\n                margin: 0;\r\n                padding: 0;\r\n                display: flex;\r\n            }\r\n        }\r\n        \r\n    }\r\n    \r\n\r\n</style>"]}]}